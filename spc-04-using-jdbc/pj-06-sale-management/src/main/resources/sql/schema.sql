CREATE TABLE product (
	code VARCHAR(40) NOT NULL,
	name VARCHAR(40) NOT NULL,
	price INT NOT NULL,
	PRIMARY KEY (code)
);

CREATE TABLE sale_history (
	id INT GENERATED BY DEFAULT AS IDENTITY,
	sale_person VARCHAR(40) NOT NULL,
	sale_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (id)
);

CREATE TABLE sale_product (
	code VARCHAR(40) NOT NULL,
	sale_id INT NOT NULL,
	unit_price INT NOT NULL,
	quantity INT NOT NULL,
	PRIMARY KEY (code, sale_id),
	FOREIGN KEY (code) REFERENCES product (code),
	FOREIGN KEY (sale_id) REFERENCES sale_history (id)
);